(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{1559:(e,t,a)=>{"use strict";a.d(t,{ToastProvider:()=>i,d:()=>c});var s=a(95155),r=a(12115),n=a(24775),o=a(27515);let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)([]),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=Math.random().toString(36).substring(7),r={id:s,message:e,type:t,duration:a};i(e=>[...e,r]),setTimeout(()=>{i(e=>e.filter(e=>e.id!==s))},a)},d=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,s.jsxs)(l.Provider,{value:{showToast:c,showSuccess:e=>c(e,"success"),showError:e=>c(e,"error",6e3),showWarning:e=>c(e,"warning"),showInfo:e=>c(e,"info")},children:[t,a.map((e,t)=>(0,s.jsx)(n.A,{open:!0,autoHideDuration:e.duration,onClose:()=>d(e.id),anchorOrigin:{vertical:"top",horizontal:"right"},style:{top:"".concat(20+70*t,"px")},children:(0,s.jsx)(o.A,{onClose:()=>d(e.id),severity:e.type,variant:"filled",sx:{width:"100%",fontSize:"14px",fontWeight:"medium"},children:e.message})},e.id))]})}function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},14585:(e,t,a)=>{"use strict";a.d(t,{j2:()=>l});var s=a(52078),r=a(64663),n=a(12553);let o=(0,s.Wp)({apiKey:"AIzaSyBhaPnfVZavlfHQ4UEbORmirHOhRHJvw4I",authDomain:"kallinai.firebaseapp.com",projectId:"kallinai",storageBucket:"kallinai.firebasestorage.app",messagingSenderId:"293968338314",appId:"1:293968338314:web:fe15f7265de96c6ef7bc73",measurementId:"G-1LDHKR8B7F"}),l=(0,n.xI)(o);(0,r.P5)(o)},41444:(e,t,a)=>{"use strict";a.d(t,{Zx:()=>l,vF:()=>o,vN:()=>i});var s=a(19708),r=a(14585);class n{async logActivity(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"MEDIUM",o=arguments.length>4?arguments[4]:void 0;try{var l;let i=r.j2.currentUser;if(!i)return void console.warn("No authenticated user found for logging");let c={timestamp:new Date().toISOString(),adminId:i.uid,adminName:i.displayName||(null==(l=i.email)?void 0:l.split("@")[0])||"Unknown Admin",adminEmail:i.email||"unknown@example.com",action:e,category:t,details:a,severity:n,metadata:{...o,userAgent:window.navigator.userAgent,ipAddress:"Client-side"}};await (0,s.gS)(this.logsCollection,c),console.log("Activity logged:",e)}catch(e){console.error("Failed to log activity:",e)}}async getRecentLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{let t=(0,s.P)(this.logsCollection,(0,s.My)("timestamp","desc"),(0,s.AB)(e)),a=await (0,s.GG)(t),r=[];return a.forEach(e=>{r.push({id:e.id,...e.data()})}),r}catch(e){return console.error("Failed to fetch logs:",e),[]}}async getLogsByAdmin(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=(0,s.P)(this.logsCollection,(0,s._M)("adminId","==",e),(0,s.My)("timestamp","desc"),(0,s.AB)(t)),r=await (0,s.GG)(a),n=[];return r.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){return console.error("Failed to fetch admin logs:",e),[]}}async getLogsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=(0,s.P)(this.logsCollection,(0,s._M)("category","==",e),(0,s.My)("timestamp","desc"),(0,s.AB)(t)),r=await (0,s.GG)(a),n=[];return r.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){return console.error("Failed to fetch category logs:",e),[]}}async logPromptChanged(e,t,a){await this.logActivity("PROMPT_CHANGED","USER_MANAGEMENT","Admin changed prompt for ".concat(t," (").concat(e,")"),"MEDIUM",{targetEmail:e,targetUser:t,oldValue:a.oldPrompt,newValue:a.newPrompt})}async logMinutesAdded(e,t,a,s){await this.logActivity("MINUTES_ADDED","USER_MANAGEMENT","Admin added ".concat(a," minutes to ").concat(t," (").concat(e,"). New total: ").concat(s," minutes"),"MEDIUM",{targetEmail:e,targetUser:t,oldValue:s-a,newValue:s})}async logAdminCreated(e,t){await this.logActivity("ADMIN_CREATED","ADMIN_MANAGEMENT","New admin account created: ".concat(e," by ").concat(t),"HIGH",{targetEmail:e,createdBy:t})}async logAdminDeleted(e){await this.logActivity("ADMIN_DELETED","ADMIN_MANAGEMENT","Admin account deleted: ".concat(e),"CRITICAL",{targetEmail:e})}async logAdminUpdated(e,t){await this.logActivity("ADMIN_UPDATED","ADMIN_MANAGEMENT","Admin account updated: ".concat(e),"MEDIUM",{targetEmail:e,newValue:t})}async logUserAction(e,t,a){e.includes("LOGIN")||e.includes("LOGOUT")||await this.logActivity(e,"USER_MANAGEMENT",a,"MEDIUM",{targetEmail:t})}async logSystemAction(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LOW";e.includes("LOGIN")||e.includes("LOGOUT")||e.includes("ADMIN_SIGNIN")||await this.logActivity(e,"SYSTEM",t,a)}constructor(){this.db=(0,s.aU)(),this.logsCollection=(0,s.rJ)(this.db,"activity_logs")}}let o=new n;o.logActivity.bind(o);let l=o.getRecentLogs.bind(o);o.getLogsByAdmin.bind(o);let i=o.getLogsByCategory.bind(o)},42823:e=>{"use strict";e.exports=JSON.parse('{"T":{"zB":"#FE5B02","ON":"#FFFFFF","XT":"#1a1a1a","Oh":{"50":"#f9fafb","Id":"#f3f4f6","zT":"#e5e7eb","Sh":"#d1d5db","jC":"#9ca3af","C2":"#6b7280","l8":"#4b5563","eD":"#374151","n4":"#1f2937","uu":"#111827"}}}')},55485:(e,t,a)=>{"use strict";a.d(t,{D:()=>l,ThemeProvider:()=>o});var s=a(95155),r=a(12115);let n=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=localStorage.getItem("kallin_theme");e?o("dark"===e):o(window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),(0,r.useEffect)(()=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("kallin_theme",a?"dark":"light")},[a]),(0,s.jsx)(n.Provider,{value:{isDark:a,toggleTheme:()=>{o(e=>!e)}},children:t})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},60604:(e,t,a)=>{Promise.resolve().then(a.bind(a,84432))},84432:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var s=a(95155),r=a(20063),n=a(12115),o=a(55485),l=a(1559),i=a(41444),c=a(26991),d=a(73850),m=a(47734),u=a(74595),g=a(10232),x=a(94621);async function h(){let e=new Date,t=new Date;t.setMonth(e.getMonth()-6);let a={queries:[{name:"LLM, STT, TTS, VAPI Costs",table:"call",operations:[{operation:"sum",column:"costBreakdown.llm"},{operation:"sum",column:"costBreakdown.stt"},{operation:"sum",column:"costBreakdown.tts"},{operation:"sum",column:"costBreakdown.vapi"}],timeRange:{start:t.toISOString(),end:e.toISOString()}},{name:"Number of Calls by Type",table:"call",operations:[{operation:"count",column:"id"}],groupBy:["type"],timeRange:{start:t.toISOString(),end:e.toISOString()}},{name:"Number of Calls by Assistant",table:"call",operations:[{operation:"count",column:"id"}],groupBy:["assistantId"],timeRange:{start:t.toISOString(),end:e.toISOString()}},{name:"Total Call Duration",table:"call",operations:[{operation:"sum",column:"duration"}],timeRange:{start:t.toISOString(),end:e.toISOString()}},{name:"Total Spent",table:"call",operations:[{operation:"sum",column:"cost"}],timeRange:{start:t.toISOString(),end:e.toISOString()}}]};try{var s,r;let e=await fetch("https://api.vapi.ai/analytics",{method:"POST",headers:{Authorization:"Bearer ".concat("4214a0ea-b594-435d-9abb-599c1f3a81ea"),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("Analytics API failed: ".concat(e.status));let t=await e.json(),n=t.find(e=>"LLM, STT, TTS, VAPI Costs"===e.name),o=t.find(e=>"Number of Calls by Type"===e.name),l=t.find(e=>"Number of Calls by Assistant"===e.name),i=t.find(e=>"Total Call Duration"===e.name),c=t.find(e=>"Total Spent"===e.name),d=null==n?void 0:n.result[0],m=null==o?void 0:o.result,u=null==l?void 0:l.result,g=null==i?void 0:i.result[0],x=null==c?void 0:c.result[0],h={llm:(null==d?void 0:d.sumCostBreakdownLlm)||0,stt:(null==d?void 0:d.sumCostBreakdownStt)||0,tts:(null==d?void 0:d.sumCostBreakdownTts)||0,vapi:(null==d?void 0:d.sumCostBreakdownVapi)||0},p={inbound:parseInt((null==m||null==(s=m.find(e=>"inboundPhoneCall"===e.type))?void 0:s.countId)||"0"),web:parseInt((null==m||null==(r=m.find(e=>"webCall"===e.type))?void 0:r.countId)||"0")},y=(null==u?void 0:u.map(e=>({assistantId:e.assistantId,callCount:parseInt(e.countId)})))||[];return{costBreakdown:h,callsByType:p,callsByAssistant:y,totalDuration:(null==g?void 0:g.sumDuration)||0,totalCost:(null==x?void 0:x.sumCost)||0,lastUpdated:new Date}}catch(e){return console.error("Failed to fetch VAPI analytics:",e),{costBreakdown:{llm:0,stt:0,tts:0,vapi:0},callsByType:{inbound:0,web:0},callsByAssistant:[],totalDuration:0,totalCost:0,lastUpdated:new Date}}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date().getMonth();return Array.from({length:t},(r,n)=>{let o=(s-t+1+n+12)%12,l=Math.round(e/t*(.7+.6*Math.random()));return{month:a[o],value:Math.max(0,l)}})}var y=a(42823);let b=e=>{let{active:t,payload:a,label:r}=e,{isDark:n}=(0,o.D)();return t&&a&&a.length?(0,s.jsxs)("div",{className:"".concat(n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"," p-3 border rounded-lg shadow-lg"),children:[(0,s.jsx)("p",{className:"".concat(n?"text-gray-300":"text-gray-600"," text-sm font-medium"),children:"".concat(r," 2025")}),(0,s.jsxs)("p",{className:"".concat(n?"text-white":"text-gray-900"," font-semibold"),children:[(0,s.jsx)("span",{className:"text-orange-500",children:"●"})," Calls: ",a[0].value.toLocaleString()]})]}):null};function f(){let{isDark:e}=(0,o.D)(),[t,a]=(0,n.useState)([{month:"Jan",users:0},{month:"Feb",users:0},{month:"Mar",users:0},{month:"Apr",users:0},{month:"May",users:0},{month:"Jun",users:0},{month:"Jul",users:0},{month:"Aug",users:0},{month:"Sep",users:0},{month:"Oct",users:0},{month:"Nov",users:0},{month:"Dec",users:0}]),[,r]=(0,n.useState)(!0),[l,i]=(0,n.useState)(null),[f,w]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||w(!0);try{let e=await h(),t=e.callsByAssistant.reduce((e,t)=>e+t.callCount,0),s=p(t,12).map(e=>({month:e.month,users:e.value}));a(s),i(e.lastUpdated)}catch(e){console.error("Failed to load analytics:",e)}finally{r(!1),w(!1)}};e(!0);let t=setInterval(()=>{e(!1)},2e4);return()=>{clearInterval(t)}},[]),(0,s.jsxs)("div",{className:"".concat(e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border p-4 sm:p-6"),children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold ".concat(e?"text-white":"text-gray-900"),children:"Calls by Assistant"}),l&&(0,s.jsxs)("p",{className:"text-xs ".concat(e?"text-gray-400":"text-gray-500"," mt-1"),children:["Last updated: ",l.toLocaleTimeString(),f&&(0,s.jsxs)("span",{className:"ml-2 inline-flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{className:"ml-1",children:"Updating..."})]})]})]}),(0,s.jsxs)("select",{className:"text-sm border rounded px-2 py-1 w-fit ".concat(e?"bg-gray-700 border-gray-600 text-gray-300":"bg-white border-gray-300 text-gray-700"),children:[(0,s.jsx)("option",{children:"2025"}),(0,s.jsx)("option",{children:"2024"}),(0,s.jsx)("option",{children:"2023"})]})]}),(0,s.jsx)("div",{className:"w-full h-48 sm:h-56 lg:h-60",children:(0,s.jsx)(c.u,{width:"100%",height:"100%",children:(0,s.jsxs)(d.Q,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:y.T.zB,stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:y.T.zB,stopOpacity:.1})]})}),(0,s.jsx)(m.W,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"}}),(0,s.jsx)(u.h,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"},tickFormatter:e=>e.toLocaleString()}),(0,s.jsx)(g.m,{content:(0,s.jsx)(b,{})}),(0,s.jsx)(x.Gk,{type:"monotone",dataKey:"users",stroke:y.T.zB,strokeWidth:2,fillOpacity:1,fill:"url(#colorUsers)"})]})})})]})}var w=a(35161),v=a(68425),j=a(96917),A=a(57095);let N=e=>{let{active:t,payload:a,label:r}=e,{isDark:n}=(0,o.D)();return t&&a&&a.length?(0,s.jsxs)("div",{className:"".concat(n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"," p-3 border rounded-lg shadow-lg"),children:[(0,s.jsx)("p",{className:"".concat(n?"text-gray-300":"text-gray-600"," text-sm font-medium mb-1"),children:r}),a.map((e,t)=>(0,s.jsxs)("p",{className:"".concat(n?"text-white":"text-gray-900"," font-semibold text-sm"),children:[(0,s.jsx)("span",{style:{color:e.color},children:"●"})," ",e.name,": ",e.name.includes("Budget")?"$".concat(e.value):"".concat(e.value," min")]},t))]}):null},k=()=>{let{isDark:e}=(0,o.D)();return(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.T.zB}}),(0,s.jsx)("span",{className:"text-sm ".concat(e?"text-gray-300":"text-gray-600"),children:"Minutes"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e?"bg-gray-400":"bg-gray-500")}),(0,s.jsx)("span",{className:"text-sm ".concat(e?"text-gray-300":"text-gray-600"),children:"Budget"})]})]})};function S(){let{isDark:e}=(0,o.D)(),[t,a]=(0,n.useState)([{month:"Apr",minutes:0,budget:0},{month:"May",minutes:0,budget:0},{month:"Jun",minutes:0,budget:0},{month:"Jul",minutes:0,budget:0},{month:"Aug",minutes:0,budget:0},{month:"Sep",minutes:0,budget:0},{month:"Oct",minutes:0,budget:0}]),[,r]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=async()=>{try{let e=await h(),t=e.callsByAssistant.reduce((e,t)=>e+t.callCount,0),s=e.costBreakdown.llm+e.costBreakdown.stt+e.costBreakdown.tts+e.costBreakdown.vapi,r=p(3.5*t,7),n=p(20*s,7),o=r.map((e,t)=>{var a;return{month:e.month,minutes:e.value,budget:(null==(a=n[t])?void 0:a.value)||0}});a(o)}catch(e){console.error("Failed to load analytics:",e)}finally{r(!1)}};e();let t=setInterval(()=>{e()},2e4);return()=>{clearInterval(t)}},[]),(0,s.jsxs)("div",{className:"".concat(e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border p-4 sm:p-6"),children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold ".concat(e?"text-white":"text-gray-900"," mb-4"),children:"Minutes Vs Budget"}),(0,s.jsx)("div",{className:"w-full h-56 sm:h-64",children:(0,s.jsx)(c.u,{width:"100%",height:"100%",children:(0,s.jsxs)(w.X,{data:t,margin:{top:20,right:20,left:10,bottom:5},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:y.T.zB,stopOpacity:.8}),(0,s.jsx)("stop",{offset:"100%",stopColor:y.T.zB,stopOpacity:.1})]})}),(0,s.jsx)(v.d,{strokeDasharray:"3 3",stroke:e?"#374151":"#E5E7EB",horizontal:!0,vertical:!1}),(0,s.jsx)(m.W,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"}}),(0,s.jsx)(u.h,{yAxisId:"left",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"},domain:[0,"dataMax + 100"]}),(0,s.jsx)(u.h,{yAxisId:"right",orientation:"right",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"},tickFormatter:e=>"$".concat(Math.round(e)),domain:[0,"dataMax + 50"]}),(0,s.jsx)(g.m,{content:(0,s.jsx)(N,{})}),(0,s.jsx)(j.y,{yAxisId:"left",dataKey:"minutes",fill:y.T.zB,radius:[4,4,0,0],name:"Minutes"}),(0,s.jsx)(A.N,{yAxisId:"right",type:"monotone",dataKey:"budget",stroke:e?"#9CA3AF":"#6B7280",strokeWidth:3,dot:{r:5,fill:e?"#9CA3AF":"#6B7280",strokeWidth:2,stroke:e?"#374151":"#E5E7EB"},name:"Budget"})]})})}),(0,s.jsx)(k,{})]})}let C=e=>{let{active:t,payload:a,label:r}=e,{isDark:n}=(0,o.D)();return t&&a&&a.length?(0,s.jsxs)("div",{className:"".concat(n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"," p-3 border rounded-lg shadow-lg"),children:[(0,s.jsx)("p",{className:"".concat(n?"text-gray-300":"text-gray-600"," text-sm font-medium mb-1"),children:r}),a.map((e,t)=>(0,s.jsxs)("p",{className:"".concat(n?"text-white":"text-gray-900"," font-semibold text-sm"),children:[(0,s.jsx)("span",{style:{color:e.color},children:"●"})," ",e.name,": ",e.value.toLocaleString()]},t))]}):null},I=()=>{let{isDark:e}=(0,o.D)();return(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.T.zB}}),(0,s.jsx)("span",{className:"text-sm ".concat(e?"text-gray-300":"text-gray-600"),children:"Inbound Calls"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e?"bg-gray-400":"bg-gray-500")}),(0,s.jsx)("span",{className:"text-sm ".concat(e?"text-gray-300":"text-gray-600"),children:"Web Calls"})]})]})};function E(){let{isDark:e}=(0,o.D)(),[t,a]=(0,n.useState)([{month:"Apr",numbers:0,cost:0},{month:"May",numbers:0,cost:0},{month:"Jun",numbers:0,cost:0},{month:"Jul",numbers:0,cost:0},{month:"Aug",numbers:0,cost:0},{month:"Sep",numbers:0,cost:0},{month:"Oct",numbers:0,cost:0}]),[,r]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=async()=>{try{let e=await h(),t=e.callsByType.inbound,s=e.callsByType.web,r=p(t,7),n=p(s,7),o=r.map((e,t)=>{var a;return{month:e.month,numbers:e.value,cost:(null==(a=n[t])?void 0:a.value)||0}});a(o)}catch(e){console.error("Failed to load analytics:",e)}finally{r(!1)}};e();let t=setInterval(()=>{e()},2e4);return()=>{clearInterval(t)}},[]),(0,s.jsxs)("div",{className:"".concat(e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border p-4 sm:p-6"),children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold ".concat(e?"text-white":"text-gray-900"," mb-4"),children:"Calls by Type"}),(0,s.jsx)("div",{className:"w-full h-56 sm:h-64",children:(0,s.jsx)(c.u,{width:"100%",height:"100%",children:(0,s.jsxs)(w.X,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorNumbers",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:y.T.zB,stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:y.T.zB,stopOpacity:.1})]})}),(0,s.jsx)(v.d,{strokeDasharray:"3 3",stroke:e?"#374151":"#E5E7EB"}),(0,s.jsx)(m.W,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"}}),(0,s.jsx)(u.h,{yAxisId:"left",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"}}),(0,s.jsx)(u.h,{yAxisId:"right",orientation:"right",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:e?"#9CA3AF":"#6B7280"},tickFormatter:e=>"$".concat(e)}),(0,s.jsx)(g.m,{content:(0,s.jsx)(C,{})}),(0,s.jsx)(x.Gk,{yAxisId:"left",type:"monotone",dataKey:"numbers",stroke:y.T.zB,strokeWidth:2,fillOpacity:1,fill:"url(#colorNumbers)",name:"Inbound Calls"}),(0,s.jsx)(A.N,{yAxisId:"right",type:"monotone",dataKey:"cost",stroke:e?"#9CA3AF":"#6B7280",strokeWidth:2,dot:{r:4,fill:e?"#9CA3AF":"#6B7280"},name:"Web Calls"})]})})}),(0,s.jsx)(I,{})]})}function B(e){let{users:t,onViewMore:a}=e,{isDark:r}=(0,o.D)(),n=t.slice(0,2);return(0,s.jsxs)("div",{className:"".concat(r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border overflow-hidden"),children:[(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold ".concat(r?"text-white":"text-gray-900"),children:"Recent Users"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"".concat(r?"bg-gray-750":"bg-gray-50"),children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ".concat(r?"text-gray-400":"text-gray-500"),children:"ID"}),(0,s.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ".concat(r?"text-gray-400":"text-gray-500"),children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"hidden sm:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ".concat(r?"text-gray-400":"text-gray-500"),children:"Email"}),(0,s.jsxs)("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ".concat(r?"text-gray-400":"text-gray-500"),children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:"Status"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Status"})]}),(0,s.jsx)("th",{scope:"col",className:"hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ".concat(r?"text-gray-400":"text-gray-500"),children:"Minutes"}),(0,s.jsx)("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ".concat(r?"text-gray-400":"text-gray-500"),children:"Plan"})]})}),(0,s.jsx)("tbody",{className:"".concat(r?"bg-gray-800":"bg-white"," divide-y divide-gray-200 dark:divide-gray-700"),children:n.map(e=>{var t;return(0,s.jsxs)("tr",{className:"".concat(r?"hover:bg-gray-700":"hover:bg-gray-50"," transition-colors duration-150"),children:[(0,s.jsxs)("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm ".concat(r?"text-gray-300":"text-gray-900"),children:["#",e.id]}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium ".concat(r?"text-white":"text-gray-900"),children:(0,s.jsxs)("div",{children:[e.name,(0,s.jsx)("div",{className:"sm:hidden text-xs ".concat(r?"text-gray-400":"text-gray-500"," mt-1"),children:e.email})]})}),(0,s.jsx)("td",{className:"hidden sm:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm ".concat(r?"text-gray-300":"text-gray-500"),children:e.email}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm ".concat(r?"text-gray-300":"text-gray-900"),children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat("active"===e.status.toLowerCase()?r?"bg-green-900/50 text-green-300 border-green-700":"bg-green-100 text-green-800 border-green-200":r?"bg-yellow-900/50 text-yellow-300 border-yellow-700":"bg-yellow-100 text-yellow-800 border-yellow-200"),children:e.status})}),(0,s.jsxs)("td",{className:"hidden md:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm ".concat(r?"text-gray-300":"text-gray-500"),children:[e.minutes_used,"/",e.minutes_allowed]}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(r?(e=>{switch((e||"").toLowerCase()){case"free":case"":return"bg-gray-900/50 text-gray-400 border-gray-600";case"starter":case"monthly":return"bg-blue-900/50 text-blue-300 border-blue-700";case"popular":case"yearly":return"bg-green-900/50 text-green-300 border-green-700";case"pro":return"bg-purple-900/50 text-purple-300 border-purple-700";case"quarter":return"bg-teal-900/50 text-teal-300 border-teal-700";default:return"bg-gray-900/50 text-gray-300 border-gray-700"}})(e.plan):(e=>{switch((e||"").toLowerCase()){case"free":case"":return"bg-gray-100 text-gray-700 border-gray-300";case"starter":case"monthly":return"bg-blue-100 text-blue-800 border-blue-200";case"popular":case"yearly":return"bg-green-100 text-green-800 border-green-200";case"pro":return"bg-purple-100 text-purple-800 border-purple-200";case"quarter":return"bg-teal-100 text-teal-800 border-teal-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.plan)),children:(t=e.plan)&&""!==t.trim()?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Free"})})]},e.id)})})]})}),(0,s.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-center",children:(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 text-sm font-medium text-white rounded-lg transition-all duration-200 hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",style:{backgroundColor:y.T.zB},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(254, 91, 2, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"View More Users"})})]})}function T(){let{}=(0,o.D)(),{showError:e}=(0,l.d)(),t=(0,r.useRouter)(),[a,c]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://3758a6b3509d.ngrok-free.app/api","/auth/users"),{headers:{"ngrok-skip-browser-warning":"true"}});if(e.ok){let t=await e.json();c(t.users||t||[])}else console.error("Failed to fetch users for dashboard:",e.status),i.vF.logSystemAction("DASHBOARD_USER_DATA_FETCH_FAILED","Failed to fetch users for dashboard: HTTP ".concat(e.status),"MEDIUM")}catch(e){console.error("Error fetching users for dashboard:",e),i.vF.logSystemAction("DASHBOARD_USER_API_CONNECTION_FAILED","Failed to connect to user API for dashboard: ".concat(e),"HIGH")}finally{}})()},[e]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(f,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(S,{}),(0,s.jsx)(E,{})]}),(0,s.jsx)(B,{users:a,onViewMore:()=>{t.push("/admin/user-management")}})]})}}},e=>{e.O(0,[9135,3965,1556,4469,4927,8441,1255,7358],()=>e(e.s=60604)),_N_E=e.O()}]);