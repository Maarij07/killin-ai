"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9710],{14585:(e,t,a)=>{a.d(t,{j2:()=>i});var r=a(52078),s=a(64663),n=a(12553);let o=(0,r.Wp)({apiKey:"AIzaSyBhaPnfVZavlfHQ4UEbORmirHOhRHJvw4I",authDomain:"kallinai.firebaseapp.com",projectId:"kallinai",storageBucket:"kallinai.firebasestorage.app",messagingSenderId:"293968338314",appId:"1:293968338314:web:fe15f7265de96c6ef7bc73",measurementId:"G-1LDHKR8B7F"}),i=(0,n.xI)(o);(0,s.P5)(o)},19710:(e,t,a)=>{a.d(t,{A:()=>x});var r=a(95155),s=a(12115),n=a(41444),o=a(55485),i=a(24287),l=a(22441),c=a(88125);let d=s.forwardRef(function(e,t){let{title:a,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}),g=s.forwardRef(function(e,t){let{title:a,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var m=a(41715);let u=s.forwardRef(function(e,t){let{title:a,titleId:r,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});var h=a(42823);let x=e=>{let{className:t=""}=e,{isDark:a}=(0,o.D)(),[x,y]=(0,s.useState)([]),[p,w]=(0,s.useState)(!0),[v,f]=(0,s.useState)(""),[b,N]=(0,s.useState)("ALL"),[A,j]=(0,s.useState)("ALL"),[E,M]=(0,s.useState)(1),[L]=(0,s.useState)(20),k=(0,s.useCallback)(async()=>{w(!0);try{let e=[];e="ALL"===b?await (0,n.Zx)(200):await (0,n.vN)(b,200),y(e)}catch(e){console.error("Failed to load activity logs:",e)}finally{w(!1)}},[b]);(0,s.useEffect)(()=>{k()},[b,k]);let C=x.filter(e=>{let t=e.action.toLowerCase().includes(v.toLowerCase())||e.adminName.toLowerCase().includes(v.toLowerCase())||e.adminEmail.toLowerCase().includes(v.toLowerCase())||e.details.toLowerCase().includes(v.toLowerCase()),a="ALL"===A||e.severity===A;return t&&a}),I=Math.ceil(C.length/L),T=E*L,S=T-L,D=C.slice(S,T);return p?(0,r.jsx)("div",{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border shadow-md ").concat(t),children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 ".concat(a?"bg-gray-700":"bg-gray-200"," rounded mb-4 w-1/3")}),(0,r.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,r.jsx)("div",{className:"h-12 ".concat(a?"bg-gray-700":"bg-gray-100"," rounded")},e))})]})})}):(0,r.jsx)("div",{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border shadow-md ").concat(t),children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold ".concat(a?"text-white":"text-gray-900"," flex items-center"),children:[(0,r.jsx)(g,{className:"h-5 w-5 mr-2",style:{color:h.T.zB}}),"Activity Logs"]}),(0,r.jsx)("button",{onClick:k,className:"px-4 py-2 text-white rounded-md transition-colors hover:opacity-90",style:{backgroundColor:h.T.zB},children:"Refresh"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 ".concat(a?"text-gray-400":"text-gray-500"," h-4 w-4")}),(0,r.jsx)("input",{type:"text",placeholder:"Search logs...",value:v,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-md focus:ring-2 transition-colors ".concat(a?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-orange-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-orange-500"," focus:outline-none focus:ring-orange-500/20"),style:{"--tw-ring-color":"".concat(h.T.zB,"33")}})]}),(0,r.jsxs)("select",{value:b,onChange:e=>N(e.target.value),className:"px-3 py-2 border rounded-md focus:ring-2 transition-colors ".concat(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"," focus:outline-none focus:ring-orange-500/20 focus:border-orange-500"),style:{"--tw-ring-color":"".concat(h.T.zB,"33")},children:[(0,r.jsx)("option",{value:"ALL",children:"All Categories"}),(0,r.jsx)("option",{value:"ADMIN_MANAGEMENT",children:"Admin Management"}),(0,r.jsx)("option",{value:"USER_MANAGEMENT",children:"User Management"}),(0,r.jsx)("option",{value:"AUTHENTICATION",children:"Authentication"}),(0,r.jsx)("option",{value:"SYSTEM",children:"System"}),(0,r.jsx)("option",{value:"SETTINGS",children:"Settings"})]}),(0,r.jsxs)("select",{value:A,onChange:e=>j(e.target.value),className:"px-3 py-2 border rounded-md focus:ring-2 transition-colors ".concat(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"," focus:outline-none focus:ring-orange-500/20 focus:border-orange-500"),style:{"--tw-ring-color":"".concat(h.T.zB,"33")},children:[(0,r.jsx)("option",{value:"ALL",children:"All Severities"}),(0,r.jsx)("option",{value:"LOW",children:"Low"}),(0,r.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,r.jsx)("option",{value:"HIGH",children:"High"}),(0,r.jsx)("option",{value:"CRITICAL",children:"Critical"})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm ".concat(a?"text-gray-400":"text-gray-500"),children:[(0,r.jsx)(u,{className:"h-4 w-4 mr-2",style:{color:h.T.zB}}),C.length," results"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y ".concat(a?"divide-gray-700":"divide-gray-200"),children:[(0,r.jsx)("thead",{className:a?"bg-gray-700":"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"Timestamp"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"Admin"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"Action"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"Details"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"Severity"})]})}),(0,r.jsx)("tbody",{className:"".concat(a?"bg-gray-800":"bg-white"," divide-y ").concat(a?"divide-gray-700":"divide-gray-200"),children:D.map(e=>(0,r.jsxs)("tr",{className:"".concat(a?"hover:bg-gray-700":"hover:bg-gray-50"," transition-colors"),children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm ".concat(a?"text-gray-300":"text-gray-900"),children:new Date(e.timestamp).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium ".concat(a?"text-white":"text-gray-900"),children:e.adminName}),(0,r.jsx)("div",{className:"text-sm ".concat(a?"text-gray-400":"text-gray-500"),children:e.adminEmail})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium ".concat(a?"text-white":"text-gray-900"),children:e.action.replace(/_/g," ")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-sm ".concat(a?"text-gray-300":"text-gray-600"),children:[(0,r.jsx)("span",{style:{color:h.T.zB},children:(e=>{switch(e){case"ADMIN_MANAGEMENT":case"AUTHENTICATION":return(0,r.jsx)(i.A,{className:"h-4 w-4"});case"USER_MANAGEMENT":return(0,r.jsx)(l.A,{className:"h-4 w-4"});case"SYSTEM":return(0,r.jsx)(c.A,{className:"h-4 w-4"});default:return(0,r.jsx)(d,{className:"h-4 w-4"})}})(e.category)}),(0,r.jsx)("span",{className:"ml-2",children:e.category.replace(/_/g," ")})]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm ".concat(a?"text-gray-300":"text-gray-900"," max-w-xs truncate"),children:(0,r.jsx)("span",{title:e.details,children:e.details})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"LOW":return"text-green-600 bg-green-100";case"MEDIUM":return"text-blue-600 bg-blue-100";case"HIGH":return"text-orange-600 bg-orange-100";case"CRITICAL":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(e.severity)),children:e.severity})})]},e.id))})]})}),0===C.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(g,{className:"mx-auto h-12 w-12 ".concat(a?"text-gray-600":"text-gray-400"),style:{color:h.T.zB}}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium ".concat(a?"text-gray-300":"text-gray-900"),children:"No activity logs"}),(0,r.jsx)("p",{className:"mt-1 text-sm ".concat(a?"text-gray-400":"text-gray-500"),children:v||"ALL"!==b||"ALL"!==A?"No logs match your current filters.":"No activity logs found."})]}),I>1&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm ".concat(a?"text-gray-300":"text-gray-700"),children:["Showing ",S+1," to ",Math.min(T,C.length)," of ",C.length," results"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>M(e=>Math.max(e-1,1)),disabled:1===E,className:"px-3 py-2 text-sm border rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(a?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Previous"}),(0,r.jsxs)("span",{className:"px-3 py-2 text-sm ".concat(a?"text-gray-300":"text-gray-700"),children:["Page ",E," of ",I]}),(0,r.jsx)("button",{onClick:()=>M(e=>Math.min(e+1,I)),disabled:E===I,className:"px-3 py-2 text-sm border rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(a?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:"Next"})]})]})]})})}},22441:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(12115);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},24287:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(12115);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))})},41444:(e,t,a)=>{a.d(t,{Zx:()=>i,vF:()=>o,vN:()=>l});var r=a(19708),s=a(14585);class n{async logActivity(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"MEDIUM",o=arguments.length>4?arguments[4]:void 0;try{var i;let l=s.j2.currentUser;if(!l)return void console.warn("No authenticated user found for logging");let c={timestamp:new Date().toISOString(),adminId:l.uid,adminName:l.displayName||(null==(i=l.email)?void 0:i.split("@")[0])||"Unknown Admin",adminEmail:l.email||"unknown@example.com",action:e,category:t,details:a,severity:n,metadata:{...o,userAgent:window.navigator.userAgent,ipAddress:"Client-side"}};await (0,r.gS)(this.logsCollection,c),console.log("Activity logged:",e)}catch(e){console.error("Failed to log activity:",e)}}async getRecentLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{let t=(0,r.P)(this.logsCollection,(0,r.My)("timestamp","desc"),(0,r.AB)(e)),a=await (0,r.GG)(t),s=[];return a.forEach(e=>{s.push({id:e.id,...e.data()})}),s}catch(e){return console.error("Failed to fetch logs:",e),[]}}async getLogsByAdmin(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=(0,r.P)(this.logsCollection,(0,r._M)("adminId","==",e),(0,r.My)("timestamp","desc"),(0,r.AB)(t)),s=await (0,r.GG)(a),n=[];return s.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){return console.error("Failed to fetch admin logs:",e),[]}}async getLogsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=(0,r.P)(this.logsCollection,(0,r._M)("category","==",e),(0,r.My)("timestamp","desc"),(0,r.AB)(t)),s=await (0,r.GG)(a),n=[];return s.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){return console.error("Failed to fetch category logs:",e),[]}}async logPromptChanged(e,t,a){await this.logActivity("PROMPT_CHANGED","USER_MANAGEMENT","Admin changed prompt for ".concat(t," (").concat(e,")"),"MEDIUM",{targetEmail:e,targetUser:t,oldValue:a.oldPrompt,newValue:a.newPrompt})}async logMinutesAdded(e,t,a,r){await this.logActivity("MINUTES_ADDED","USER_MANAGEMENT","Admin added ".concat(a," minutes to ").concat(t," (").concat(e,"). New total: ").concat(r," minutes"),"MEDIUM",{targetEmail:e,targetUser:t,oldValue:r-a,newValue:r})}async logAdminCreated(e,t){await this.logActivity("ADMIN_CREATED","ADMIN_MANAGEMENT","New admin account created: ".concat(e," by ").concat(t),"HIGH",{targetEmail:e,createdBy:t})}async logAdminDeleted(e){await this.logActivity("ADMIN_DELETED","ADMIN_MANAGEMENT","Admin account deleted: ".concat(e),"CRITICAL",{targetEmail:e})}async logAdminUpdated(e,t){await this.logActivity("ADMIN_UPDATED","ADMIN_MANAGEMENT","Admin account updated: ".concat(e),"MEDIUM",{targetEmail:e,newValue:t})}async logUserAction(e,t,a){e.includes("LOGIN")||e.includes("LOGOUT")||await this.logActivity(e,"USER_MANAGEMENT",a,"MEDIUM",{targetEmail:t})}async logSystemAction(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LOW";e.includes("LOGIN")||e.includes("LOGOUT")||e.includes("ADMIN_SIGNIN")||await this.logActivity(e,"SYSTEM",t,a)}constructor(){this.db=(0,r.aU)(),this.logsCollection=(0,r.rJ)(this.db,"activity_logs")}}let o=new n;o.logActivity.bind(o);let i=o.getRecentLogs.bind(o);o.getLogsByAdmin.bind(o);let l=o.getLogsByCategory.bind(o)},41715:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(12115);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})},42823:e=>{e.exports=JSON.parse('{"T":{"zB":"#FE5B02","ON":"#FFFFFF","XT":"#1a1a1a","Oh":{"50":"#f9fafb","Id":"#f3f4f6","zT":"#e5e7eb","Sh":"#d1d5db","jC":"#9ca3af","C2":"#6b7280","l8":"#4b5563","eD":"#374151","n4":"#1f2937","uu":"#111827"}}}')},55485:(e,t,a)=>{a.d(t,{D:()=>i,ThemeProvider:()=>o});var r=a(95155),s=a(12115);let n=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem("kallin_theme");e?o("dark"===e):o(window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),(0,s.useEffect)(()=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("kallin_theme",a?"dark":"light")},[a]),(0,r.jsx)(n.Provider,{value:{isDark:a,toggleTheme:()=>{o(e=>!e)}},children:t})}function i(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},88125:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(12115);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})}}]);