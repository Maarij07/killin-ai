"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2846],{1559:(e,t,a)=>{a.d(t,{ToastProvider:()=>l,d:()=>c});var n=a(95155),s=a(12115),r=a(24775),o=a(27515);let i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)([]),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Math.random().toString(36).substring(7),s={id:n,message:e,type:t,duration:a};l(e=>[...e,s]),setTimeout(()=>{l(e=>e.filter(e=>e.id!==n))},a)},d=e=>{l(t=>t.filter(t=>t.id!==e))};return(0,n.jsxs)(i.Provider,{value:{showToast:c,showSuccess:e=>c(e,"success"),showError:e=>c(e,"error",6e3),showWarning:e=>c(e,"warning"),showInfo:e=>c(e,"info")},children:[t,a.map((e,t)=>(0,n.jsx)(r.A,{open:!0,autoHideDuration:e.duration,onClose:()=>d(e.id),anchorOrigin:{vertical:"top",horizontal:"right"},style:{top:"".concat(20+70*t,"px")},children:(0,n.jsx)(o.A,{onClose:()=>d(e.id),severity:e.type,variant:"filled",sx:{width:"100%",fontSize:"14px",fontWeight:"medium"},children:e.message})},e.id))]})}function c(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},8768:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))})},10874:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},14585:(e,t,a)=>{a.d(t,{j2:()=>i});var n=a(52078),s=a(64663),r=a(12553);let o=(0,n.Wp)({apiKey:"AIzaSyBhaPnfVZavlfHQ4UEbORmirHOhRHJvw4I",authDomain:"kallinai.firebaseapp.com",projectId:"kallinai",storageBucket:"kallinai.firebasestorage.app",messagingSenderId:"293968338314",appId:"1:293968338314:web:fe15f7265de96c6ef7bc73",measurementId:"G-1LDHKR8B7F"}),i=(0,r.xI)(o);(0,s.P5)(o)},22441:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},41444:(e,t,a)=>{a.d(t,{Zx:()=>i,vF:()=>o,vN:()=>l});var n=a(19708),s=a(14585);class r{async logActivity(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"MEDIUM",o=arguments.length>4?arguments[4]:void 0;try{var i;let l=s.j2.currentUser;if(!l)return void console.warn("No authenticated user found for logging");let c={timestamp:new Date().toISOString(),adminId:l.uid,adminName:l.displayName||(null==(i=l.email)?void 0:i.split("@")[0])||"Unknown Admin",adminEmail:l.email||"unknown@example.com",action:e,category:t,details:a,severity:r,metadata:{...o,userAgent:window.navigator.userAgent,ipAddress:"Client-side"}};await (0,n.gS)(this.logsCollection,c),console.log("Activity logged:",e)}catch(e){console.error("Failed to log activity:",e)}}async getRecentLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{let t=(0,n.P)(this.logsCollection,(0,n.My)("timestamp","desc"),(0,n.AB)(e)),a=await (0,n.GG)(t),s=[];return a.forEach(e=>{s.push({id:e.id,...e.data()})}),s}catch(e){return console.error("Failed to fetch logs:",e),[]}}async getLogsByAdmin(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=(0,n.P)(this.logsCollection,(0,n._M)("adminId","==",e),(0,n.My)("timestamp","desc"),(0,n.AB)(t)),s=await (0,n.GG)(a),r=[];return s.forEach(e=>{r.push({id:e.id,...e.data()})}),r}catch(e){return console.error("Failed to fetch admin logs:",e),[]}}async getLogsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=(0,n.P)(this.logsCollection,(0,n._M)("category","==",e),(0,n.My)("timestamp","desc"),(0,n.AB)(t)),s=await (0,n.GG)(a),r=[];return s.forEach(e=>{r.push({id:e.id,...e.data()})}),r}catch(e){return console.error("Failed to fetch category logs:",e),[]}}async logPromptChanged(e,t,a){await this.logActivity("PROMPT_CHANGED","USER_MANAGEMENT","Admin changed prompt for ".concat(t," (").concat(e,")"),"MEDIUM",{targetEmail:e,targetUser:t,oldValue:a.oldPrompt,newValue:a.newPrompt})}async logMinutesAdded(e,t,a,n){await this.logActivity("MINUTES_ADDED","USER_MANAGEMENT","Admin added ".concat(a," minutes to ").concat(t," (").concat(e,"). New total: ").concat(n," minutes"),"MEDIUM",{targetEmail:e,targetUser:t,oldValue:n-a,newValue:n})}async logAdminCreated(e,t){await this.logActivity("ADMIN_CREATED","ADMIN_MANAGEMENT","New admin account created: ".concat(e," by ").concat(t),"HIGH",{targetEmail:e,createdBy:t})}async logAdminDeleted(e){await this.logActivity("ADMIN_DELETED","ADMIN_MANAGEMENT","Admin account deleted: ".concat(e),"CRITICAL",{targetEmail:e})}async logAdminUpdated(e,t){await this.logActivity("ADMIN_UPDATED","ADMIN_MANAGEMENT","Admin account updated: ".concat(e),"MEDIUM",{targetEmail:e,newValue:t})}async logUserAction(e,t,a){e.includes("LOGIN")||e.includes("LOGOUT")||await this.logActivity(e,"USER_MANAGEMENT",a,"MEDIUM",{targetEmail:t})}async logSystemAction(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LOW";e.includes("LOGIN")||e.includes("LOGOUT")||e.includes("ADMIN_SIGNIN")||await this.logActivity(e,"SYSTEM",t,a)}constructor(){this.db=(0,n.aU)(),this.logsCollection=(0,n.rJ)(this.db,"activity_logs")}}let o=new r;o.logActivity.bind(o);let i=o.getRecentLogs.bind(o);o.getLogsByAdmin.bind(o);let l=o.getLogsByCategory.bind(o)},41715:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})},42823:e=>{e.exports=JSON.parse('{"T":{"zB":"#FE5B02","ON":"#FFFFFF","XT":"#1a1a1a","Oh":{"50":"#f9fafb","Id":"#f3f4f6","zT":"#e5e7eb","Sh":"#d1d5db","jC":"#9ca3af","C2":"#6b7280","l8":"#4b5563","eD":"#374151","n4":"#1f2937","uu":"#111827"}}}')},51915:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},55485:(e,t,a)=>{a.d(t,{D:()=>i,ThemeProvider:()=>o});var n=a(95155),s=a(12115);let r=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem("kallin_theme");e?o("dark"===e):o(window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),(0,s.useEffect)(()=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("kallin_theme",a?"dark":"light")},[a]),(0,n.jsx)(r.Provider,{value:{isDark:a,toggleTheme:()=>{o(e=>!e)}},children:t})}function i(){let e=(0,s.useContext)(r);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},74264:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(95155),s=a(12115),r=a(55485),o=a(42823);function i(e){let{isOpen:t,onClose:a,icon:i,title:l,description:c,customContent:d,primaryButton:u,secondaryButton:m={text:"Cancel",onClick:a}}=e,{isDark:g}=(0,r.D)();if((0,s.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,a]),!t)return null;let p=e=>{e.target===e.currentTarget&&a()},h=u?(null==u?void 0:u.variant)==="danger"?{backgroundColor:"#DC2626",color:"white",hoverBackgroundColor:"#B91C1C"}:{backgroundColor:o.T.zB,color:"white",hoverBackgroundColor:"#e54d00"}:null;return(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:p,children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:p}),(0,n.jsx)("div",{className:"relative w-full ".concat(d?"max-w-4xl":"max-w-md"," mx-auto ").concat(g?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-2xl border shadow-2xl"),onClick:e=>e.stopPropagation(),children:(0,n.jsxs)("div",{className:"p-8 ".concat(d?"text-left":"text-center"),children:[i&&(0,n.jsx)("div",{className:"".concat(d?"":"mx-auto"," mb-6 w-16 h-16 rounded-full flex items-center justify-center bg-orange-100 ").concat(d?"mx-auto":""),children:(0,n.jsx)("div",{className:"text-orange-600",children:i})}),(0,n.jsx)("h3",{className:"text-xl font-semibold mb-3 ".concat(d?"text-center":""," ").concat(g?"text-white":"text-gray-900"),children:l}),d?(0,n.jsxs)("div",{children:[c&&(0,n.jsx)("p",{className:"text-sm mb-6 text-center leading-relaxed ".concat(g?"text-gray-400":"text-gray-600"),children:c}),(0,n.jsx)("div",{className:"mb-8",children:d})]}):(0,n.jsx)("p",{className:"text-sm mb-8 leading-relaxed ".concat(g?"text-gray-400":"text-gray-600"),children:c}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 ".concat(u?"":"justify-center"),children:[(0,n.jsx)("button",{onClick:m.onClick,className:"".concat(u?"flex-1":""," px-6 py-3 text-sm font-medium rounded-lg border transition-colors ").concat(g?"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:m.text}),u&&h&&(0,n.jsx)("button",{onClick:u.onClick,className:"flex-1 px-6 py-3 text-sm font-medium rounded-lg transition-all duration-200 hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:h.backgroundColor,color:h.color},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBackgroundColor},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=h.backgroundColor},children:u.text})]})]})})]})}},82846:(e,t,a)=>{a.d(t,{default:()=>A});var n=a(95155),s=a(12115),r=a(55485),o=a(1559),i=a(41444),l=a(10874),c=a(41715),d=a(22441);let u=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});var m=a(51915),g=a(89731);let p=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});var h=a(88125),f=a(8768),y=a(42823),x=a(74264);let b="\n  .custom-select {\n    accent-color: ".concat(y.T.zB,";\n  }\n  .custom-select option {\n    background-color: white;\n    color: black;\n  }\n  .custom-select option:hover {\n    background-color: ").concat(y.T.zB," !important;\n    background: ").concat(y.T.zB," !important;\n    color: white !important;\n  }\n  .custom-select option:focus {\n    background-color: ").concat(y.T.zB," !important;\n    background: ").concat(y.T.zB," !important;\n    color: white !important;\n  }\n  .custom-select option:checked {\n    background-color: ").concat(y.T.zB," !important;\n    background: ").concat(y.T.zB," !important;\n    color: white !important;\n  }\n  .custom-select option[selected] {\n    background-color: ").concat(y.T.zB," !important;\n    background: ").concat(y.T.zB," !important;\n    color: white !important;\n  }\n  \n  /* Dark mode styles */\n  .dark .custom-select option {\n    background-color: #374151;\n    color: white;\n  }\n  .dark .custom-select option:hover {\n    background-color: ").concat(y.T.zB," !important;\n    background: ").concat(y.T.zB," !important;\n    color: white !important;\n  }\n"),v="https://3758a6b3509d.ngrok-free.app/api",w="4214a0ea-b594-435d-9abb-599c1f3a81ea",k="https://api.vapi.ai";function A(){var e,t;let{isDark:a}=(0,r.D)(),{showSuccess:A,showError:N}=(0,o.d)(),[j,E]=(0,s.useState)(""),[I,T]=(0,s.useState)([]),[C,S]=(0,s.useState)(!0),[P,O]=(0,s.useState)({isOpen:!1,user:null}),[D,M]=(0,s.useState)({isOpen:!1,user:null}),[U,_]=(0,s.useState)({isOpen:!1,user:null}),[F,L]=(0,s.useState)({status:"",addMinutes:"1",planSubscription:""}),[B,V]=(0,s.useState)(!1),[G,R]=(0,s.useState)(!1),[z,q]=(0,s.useState)(null),[H,W]=(0,s.useState)({selectedUser:"",startingMessage:"",systemPrompt:"",isEditing:!1});(0,s.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDD04 Fetching users and syncing with VAPI...");let e=await fetch("".concat(v,"/auth/users"),{headers:{"ngrok-skip-browser-warning":"true"}});if(e.ok){let t=await e.json(),a=t.users||t||[];console.log("\uD83D\uDCCA Fetched users from database:",a.length);let n=await Y(a);T(n),q(new Date)}else console.error("Failed to fetch users:",e.status),N("Failed to load users data"),i.vF.logSystemAction("USER_DATA_FETCH_FAILED","Failed to fetch users: HTTP ".concat(e.status),"MEDIUM")}catch(e){console.error("Error fetching users:",e),N("Failed to connect to API"),i.vF.logSystemAction("USER_API_CONNECTION_FAILED","Failed to connect to user API: ".concat(e),"HIGH")}finally{S(!1)}})()},[N]);let Y=async e=>{try{console.log("\uD83D\uDD04 Starting VAPI sync for users...");let t=await fetch("".concat(k,"/assistant"),{method:"GET",headers:{Authorization:"Bearer ".concat(w),"Content-Type":"application/json"}});if(!t.ok)return console.warn("⚠️ VAPI sync failed, using database data only"),e.map(e=>({...e,assistant_status:e.agent_id?"error":"no_assistant",last_synced:new Date().toISOString()}));let a=await t.json();console.log("\uD83D\uDCE6 Fetched VAPI assistants:",a.length);let n=new Map;a.forEach(e=>{if(e.id){var t;let a="";if((null==(t=e.model)?void 0:t.messages)&&Array.isArray(e.model.messages)){let t=e.model.messages.find(e=>"system"===e.role);t&&(a=t.content||"")}n.set(e.id,{firstMessage:e.firstMessage||"",systemPrompt:a,lastSynced:new Date().toISOString()})}});let s=e.map(e=>{if(!e.agent_id)return{...e,assistant_status:"no_assistant",last_synced:new Date().toISOString()};if(!n.has(e.agent_id))return{...e,assistant_status:"error",last_synced:new Date().toISOString()};{let t=n.get(e.agent_id),a=e.prompt===t.systemPrompt;return{...e,prompt:t.systemPrompt,assistant_status:a?"synced":"out_of_sync",last_synced:t.lastSynced}}});return console.log("✅ VAPI sync completed for users"),s}catch(t){return console.error("❌ Error syncing with VAPI:",t),e.map(e=>({...e,assistant_status:e.agent_id?"error":"no_assistant",last_synced:new Date().toISOString()}))}},J=async()=>{R(!0);try{console.log("\uD83D\uDD04 Manual VAPI sync initiated...");let e=await Y(I);T(e),q(new Date),A("Successfully synced with VAPI assistants"),i.vF.logSystemAction("USER_VAPI_SYNC_COMPLETED","Successfully synced ".concat(e.filter(e=>e.agent_id).length," users with VAPI assistants"),"MEDIUM")}catch(e){console.error("❌ Manual VAPI sync failed:",e),N("Failed to sync with VAPI: ".concat(e instanceof Error?e.message:"Unknown error")),i.vF.logSystemAction("USER_VAPI_SYNC_FAILED","Failed to sync users with VAPI: ".concat(e),"HIGH")}finally{R(!1)}},Z=I.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.email.toLowerCase().includes(j.toLowerCase())||e.id.toString().includes(j)),Q=async e=>{let t=I.find(t=>t.id===e);if(t){if(!t.agent_id){let a="Hello, Thank you for calling ".concat(t.name,". How can I help you today?"),n="You are a friendly, fast restaurant phone attendant for ".concat(t.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.");W({selectedUser:e.toString(),startingMessage:a,systemPrompt:n,isEditing:!1}),_({isOpen:!0,user:t});return}console.log("\uD83D\uDD04 Fetching assistant configuration from VAPI for user ".concat(t.name," (Agent ID: ").concat(t.agent_id,")"));try{let n=await fetch("".concat(k,"/assistant/").concat(t.agent_id),{method:"GET",headers:{Authorization:"Bearer ".concat(w),"Content-Type":"application/json"}});if(n.ok){var a;let s=await n.json();console.log("\uD83D\uDCE6 Fetched assistant data from VAPI:",JSON.stringify(s,null,2));let r=s.firstMessage||"Hello, Thank you for calling ".concat(t.name,". How can I help you today?"),o="";if((null==(a=s.model)?void 0:a.messages)&&Array.isArray(s.model.messages)){let e=s.model.messages.find(e=>"system"===e.role);e&&e.content&&(o=e.content)}o||(o="You are a friendly, fast restaurant phone attendant for ".concat(t.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.")),console.log("✅ Using VAPI data:"),console.log("   Starting Message:",r),console.log("   System Prompt:",o.substring(0,100)+"..."),W({selectedUser:e.toString(),startingMessage:r,systemPrompt:o,isEditing:!1})}else{let a=await n.json().catch(()=>({error:"Unknown error"}));console.error("❌ Failed to fetch assistant from VAPI:",n.status,a);let s="Hello, Thank you for calling ".concat(t.name,". How can I help you today?"),r="You are a friendly, fast restaurant phone attendant for ".concat(t.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.");console.log("⚠️ Using fallback defaults due to VAPI fetch failure"),W({selectedUser:e.toString(),startingMessage:s,systemPrompt:r,isEditing:!1})}}catch(s){console.error("❌ Error fetching assistant from VAPI:",s);let a="Hello, Thank you for calling ".concat(t.name,". How can I help you today?"),n="You are a friendly, fast restaurant phone attendant for ".concat(t.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.");console.log("⚠️ Using fallback defaults due to VAPI error"),W({selectedUser:e.toString(),startingMessage:a,systemPrompt:n,isEditing:!1})}_({isOpen:!0,user:t})}},K=()=>{O({isOpen:!1,user:null})},X=async()=>{if(D.user){V(!0);let e=parseInt(F.addMinutes)||0,t=D.user.minutes_allowed+e,a={oldStatus:D.user.status,newStatus:F.status,oldMinutes:D.user.minutes_allowed.toString(),addedMinutes:e.toString(),newMinutes:t.toString(),oldPlan:D.user.plan||"basic",newPlan:F.planSubscription};e>0&&i.vF.logMinutesAdded(D.user.email,D.user.name,e,t);try{let n="custom";n=a.oldPlan!==a.newPlan?({basic:"basic",premium:"premium",enterprise:"enterprise"})[a.newPlan]||"basic":"custom";let s={user_id:D.user.id,plan_type:n,amount_paid:0,transaction_id:"",payment_intent_id:"",minutes:e,is_admin:!0};console.log("Sending payment confirmation API call:",s);let r=await fetch("".concat(v,"/stripe/confirm-payment"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify(s)});if(r.ok){let e=await r.json();console.log("Payment confirmation API response:",e),i.vF.logUserAction("USER_PAYMENT_CONFIRMED",D.user.email,"Admin updated user via payment API: ".concat(D.user.name," (ID: ").concat(D.user.id,"). Plan: ").concat(n,", Minutes: ").concat(t)),A("Changes saved for ".concat(D.user.name)),(async()=>{try{let e=await fetch("".concat(v,"/auth/users"),{headers:{"ngrok-skip-browser-warning":"true"}});if(e.ok){let t=await e.json();T(t.users||t||[])}}catch(e){console.error("Error refreshing users:",e)}})()}else{let e=await r.json().catch(()=>({error:"Unknown error"}));console.error("Payment confirmation API failed:",r.status,e),i.vF.logUserAction("USER_PAYMENT_CONFIRMATION_FAILED",D.user.email,"Admin failed to update user via payment API: ".concat(D.user.name," (ID: ").concat(D.user.id,"). Error: ").concat(r.status," - ").concat(JSON.stringify(e))),N("Failed to save changes: ".concat(e.message||e.error||"API request failed"));return}}catch(e){console.error("Error calling payment confirmation API:",e),i.vF.logUserAction("USER_PAYMENT_API_ERROR",D.user.email,"Admin encountered error calling payment API for user: ".concat(D.user.name," (ID: ").concat(D.user.id,"). Error: ").concat(e)),N("Failed to connect to API: ".concat(e instanceof Error?e.message:"Unknown error"));return}finally{V(!1)}M({isOpen:!1,user:null})}},$=()=>{M({isOpen:!1,user:null})},ee=(e,t)=>{L(a=>({...a,[e]:t}))},et=async(e,t)=>{if(W(a=>({...a,[e]:t})),"selectedUser"===e&&t){let e=I.find(e=>e.id.toString()===t);if(e){if(!e.agent_id){let a="Hello, Thank you for calling ".concat(e.name,". How can I help you today?"),n="You are a friendly, fast restaurant phone attendant for ".concat(e.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.");W(e=>({...e,selectedUser:t,startingMessage:a,systemPrompt:n}));return}console.log("\uD83D\uDD04 [Dropdown] Fetching assistant configuration from VAPI for user ".concat(e.name," (Agent ID: ").concat(e.agent_id,")"));try{let n=await fetch("".concat(k,"/assistant/").concat(e.agent_id),{method:"GET",headers:{Authorization:"Bearer ".concat(w),"Content-Type":"application/json"}});if(n.ok){var a;let s=await n.json();console.log("\uD83D\uDCE6 [Dropdown] Fetched assistant data from VAPI:",JSON.stringify(s,null,2));let r=s.firstMessage||"Hello, Thank you for calling ".concat(e.name,". How can I help you today?"),o="";if((null==(a=s.model)?void 0:a.messages)&&Array.isArray(s.model.messages)){let e=s.model.messages.find(e=>"system"===e.role);e&&e.content&&(o=e.content)}o||(o="You are a friendly, fast restaurant phone attendant for ".concat(e.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.")),console.log("✅ [Dropdown] Using VAPI data:"),console.log("   Starting Message:",r),console.log("   System Prompt:",o.substring(0,100)+"..."),W(e=>({...e,selectedUser:t,startingMessage:r,systemPrompt:o}))}else{let a=await n.json().catch(()=>({error:"Unknown error"}));console.error("❌ [Dropdown] Failed to fetch assistant from VAPI:",n.status,a);let s="Hello, Thank you for calling ".concat(e.name,". How can I help you today?"),r="You are a friendly, fast restaurant phone attendant for ".concat(e.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.");console.log("⚠️ [Dropdown] Using fallback defaults due to VAPI fetch failure"),W(e=>({...e,selectedUser:t,startingMessage:s,systemPrompt:r}))}}catch(s){console.error("❌ [Dropdown] Error fetching assistant from VAPI:",s);let a="Hello, Thank you for calling ".concat(e.name,". How can I help you today?"),n="You are a friendly, fast restaurant phone attendant for ".concat(e.name.toUpperCase(),". Goal: Ask for the customer's name, take accurate pickup or delivery orders and confirm timing--clearly, politely, and in as few words as possible.\nStyle:\n-\nwarm, concise, professional. One to two sentences at a time.\nAsk one question at a time. Do not interrupt the caller.\nIf unsure, ask a clarifying question; don't guess.\nCore flow (follow in order):\n1) Greet Intent: \"Pickup or delivery today?\"\n2) Get name and callback number.\n3) For delivery: get full address (street, apartment, city) and any gate/buzzer notes.\n4) Take the order:\n-\nItem, size/variant, quantity, options (sauce/spice/temperature), extras, special instructions.\nIf an item is unavailable or unclear, offer close alternatives or best-sellers.\n5) Ask about allergies or dietary needs. Offer safe options without medical advice.\n6) Upsell gently (ONE quick option): sides, drinks, or desserts.\n7) Read-back and confirm: items, quantities, options, subtotal if known, delivery fee/taxes, and total if available.\n8) Quote timing: pickup-ready time or delivery estimate.\n9) Payment:\n-\nPrefer pay at pickup/delivery or a secure link if available.\nDo NOT collect full credit card numbers over the phone.");console.log("⚠️ [Dropdown] Using fallback defaults due to VAPI error"),W(e=>({...e,selectedUser:t,startingMessage:a,systemPrompt:n}))}}}},ea=async()=>{if(console.log("\uD83D\uDCBE saveVapiChanges function called!"),console.log("Current vapiForm state:",H),H.selectedUser){let t=I.find(e=>e.id.toString()===H.selectedUser);if(console.log("Selected user data:",t),t){if(console.log("Agent ID found:",t.agent_id),!t.agent_id){N("No agent ID found for ".concat(t.name,". Cannot update VAPI assistant.")),i.vF.logUserAction("USER_VAPI_UPDATE_FAILED",t.email,"Admin attempted to update VAPI configuration but no agent_id found for user: ".concat(t.name," (ID: ").concat(t.id,")"));return}try{console.log("\uD83D\uDD0D === AGENT ID DEBUGGING ==="),console.log("selectedUser object:",JSON.stringify(t,null,2)),console.log("selectedUser.agent_id:",t.agent_id),console.log("typeof selectedUser.agent_id:",typeof t.agent_id),console.log("selectedUser.agent_id length:",t.agent_id?t.agent_id.length:"null"),console.log("=== END AGENT ID DEBUGGING ==="),console.log("Testing assistant existence with GET request...");let a=await fetch("https://api.vapi.ai/assistant/".concat(t.agent_id),{method:"GET",headers:{Authorization:"Bearer 4214a0ea-b594-435d-9abb-599c1f3a81ea","Content-Type":"application/json"}});if(console.log("GET Response Status:",a.status),a.ok){let e=await a.json();console.log("\uD83D\uDD0D Current Assistant Data:",JSON.stringify(e,null,2)),e.model&&e.model.toolIds?console.log("⚠️ WARNING: Assistant currently has toolIds:",e.model.toolIds):console.log("✅ Assistant does NOT currently have toolIds")}else{let e=await a.json().catch(()=>({error:"Unknown error"}));if(console.error("Assistant GET failed:",a.status,e),404===a.status){console.error("\uD83D\uDEA8 AGENT NOT FOUND! The agent_id might be incorrect."),N("Assistant with ID ".concat(t.agent_id," not found. Please check the agent ID."));return}}let n="https://api.vapi.ai/assistant/".concat(t.agent_id),s={firstMessage:H.startingMessage,backgroundSound:"office",model:{provider:"openai",model:"gpt-4o",toolIds:["351ff32f-5b41-4f96-a103-1d2b90b64574"],messages:[{content:H.systemPrompt,role:"system"}]}};console.log("\uD83D\uDE80 === MINIMAL VAPI API REQUEST TEST ==="),console.log("URL:",n),console.log("Method: PATCH"),console.log("Headers:",{Authorization:"Bearer 4214a0ea-b594-435d-9abb-599c1f3a81ea","Content-Type":"application/json"}),console.log("Body:",JSON.stringify(s,null,2)),console.log("Agent ID:",t.agent_id),console.log("=== END REQUEST DETAILS ===");let r=await fetch(n,{method:"PATCH",headers:{Authorization:"Bearer 4214a0ea-b594-435d-9abb-599c1f3a81ea","Content-Type":"application/json"},body:JSON.stringify(s)});if(r.ok){let a=await r.json();console.log("VAPI assistant updated successfully:",a),i.vF.logPromptChanged(t.email,t.name,{oldPrompt:t.prompt||void 0,newPrompt:H.systemPrompt}),A("VAPI configuration saved for ".concat(t.name)),W(e=>({...e,isEditing:!1}));try{console.log("\uD83D\uDD04 Fetching updated assistant data from VAPI..."),console.log("\uD83D\uDD0D Agent ID being used:",t.agent_id),await new Promise(e=>setTimeout(e,1e3));let a=await fetch("".concat(k,"/assistant/").concat(t.agent_id),{method:"GET",headers:{Authorization:"Bearer ".concat(w),"Content-Type":"application/json"}});if(console.log("\uD83D\uDCE1 Updated assistant response status:",a.status),a.ok){var e;let n=await a.json();console.log("\uD83D\uDCE6 Fetched updated assistant full data:",JSON.stringify(n,null,2));let s="",r=n.firstMessage||"";if((null==(e=n.model)?void 0:e.messages)&&Array.isArray(n.model.messages)){let e=n.model.messages.find(e=>"system"===e.role);e&&(s=e.content||"")}console.log("\uD83D\uDCDD Extracted data:"),console.log("   Starting Message:",r),console.log("   System Prompt (first 100 chars):",s.substring(0,100)+"...");let o=I.map(e=>e.id===t.id?{...e,prompt:s}:e);console.log("\uD83D\uDD04 Updating users state..."),T(o),console.log("\uD83D\uDD04 Updating VAPI form state...");let i={selectedUser:t.id.toString(),startingMessage:r,systemPrompt:s,isEditing:!1};console.log("\uD83D\uDCDD New form state:",i),W(i),console.log("\n\uD83D\uDD25 === REAL-TIME SYNC VERIFICATION ==="),console.log("\uD83D\uDCCA VAPI API Response Data:"),console.log("   Starting Message (firstMessage):",'"'.concat(r,'"')),console.log("   System Prompt (model.messages[0].content):"),console.log("   ",s.substring(0,200)+"..."),console.log("\n\uD83D\uDCF1 Frontend Form State:"),console.log("   Starting Message:",'"'.concat(i.startingMessage,'"')),console.log("   System Prompt:"),console.log("   ",i.systemPrompt.substring(0,200)+"..."),console.log("\n\uD83C\uDFAF Sync Status:"),console.log("   Starting Messages Match:",r===i.startingMessage?"✅ YES":"❌ NO"),console.log("   System Prompts Match:",s===i.systemPrompt?"✅ YES":"❌ NO"),console.log("\uD83D\uDD25 === END VERIFICATION ===\n");try{console.log("\uD83D\uDCDD Attempting to update prompt for user ".concat(t.name," (ID: ").concat(t.id,") in database"));let e=new AbortController,a=setTimeout(()=>e.abort(),5e3),n=await fetch("".concat(v,"/auth/users/").concat(t.id,"/prompt"),{method:"PUT",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",Accept:"application/json"},body:JSON.stringify({prompt:s}),signal:e.signal});clearTimeout(a),n.ok?console.log("✅ Successfully updated prompt for user ".concat(t.name," in database")):console.warn("⚠️ Database update failed for user ".concat(t.id,":"),n.status,"This is optional and won't affect VAPI functionality")}catch(e){console.warn("⚠️ Database update failed (optional):",e instanceof Error?e.message:"Unknown error","- VAPI update was successful")}console.log("✅ VAPI form refreshed with updated data"),setTimeout(()=>{console.log("\uD83D\uDD04 Force refreshing form state..."),W({selectedUser:t.id.toString(),startingMessage:r,systemPrompt:s,isEditing:!1})},100)}else{let e=await a.text();console.error("Failed to fetch updated assistant:",a.status,e),console.log("\uD83D\uDD04 Using locally saved data since fetch failed..."),W(e=>({...e,isEditing:!1}))}}catch(e){console.error("Error fetching updated assistant data:",e),console.log("\uD83D\uDD04 Using locally saved data due to sync error..."),W(e=>({...e,isEditing:!1}))}}else{let e=await r.json().catch(()=>({error:"Unknown error"}));console.error("Failed to update VAPI assistant:",r.status,e),i.vF.logUserAction("USER_VAPI_UPDATE_FAILED",t.email,"Admin failed to update VAPI configuration for user: ".concat(t.name," (ID: ").concat(t.id,"). API Error: ").concat(r.status," - ").concat(JSON.stringify(e))),N("Failed to update VAPI configuration: ".concat(e.error||"API request failed"))}}catch(e){console.error("Error updating VAPI assistant:",e),i.vF.logUserAction("USER_VAPI_UPDATE_ERROR",t.email,"Admin encountered error updating VAPI configuration for user: ".concat(t.name," (ID: ").concat(t.id,"). Error: ").concat(e)),N("Failed to connect to VAPI API: ".concat(e instanceof Error?e.message:"Unknown error"))}}}},en=()=>{_({isOpen:!1,user:null}),W({selectedUser:"",startingMessage:"",systemPrompt:"",isEditing:!1})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:b}}),(0,n.jsx)("div",{className:"space-y-6",children:C?(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-lg ".concat(a?"text-gray-300":"text-gray-600"),children:"Loading users..."})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold ".concat(a?"text-white":"text-gray-900"),children:"User Management"}),(0,n.jsxs)("p",{className:"mt-2 text-sm ".concat(a?"text-gray-400":"text-gray-600"),children:["Manage user accounts, permissions, and access controls",z&&(0,n.jsxs)("span",{className:"ml-2 text-xs ".concat(a?"text-gray-500":"text-gray-400"),children:["• Last synced: ",z.toLocaleTimeString()]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("button",{onClick:J,disabled:G||C,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md border transition-colors ".concat(G||C?"opacity-50 cursor-not-allowed":""),style:{color:a?y.T.Oh.Sh:y.T.Oh.eD,borderColor:a?y.T.Oh.l8:y.T.Oh.Sh},onMouseEnter:e=>{G||C||(e.currentTarget.style.backgroundColor=a?y.T.Oh.eD:y.T.Oh[50])},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},title:"Sync with VAPI to get latest assistant data",children:[(0,n.jsx)(l.A,{className:"h-4 w-4 mr-2 ".concat(G?"animate-spin":"")}),G?"Syncing...":"Sync VAPI"]}),(0,n.jsxs)("div",{className:"relative w-80",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(c.A,{className:"h-5 w-5 ".concat(a?"text-gray-400":"text-gray-500")})}),(0,n.jsx)("input",{type:"text",placeholder:"Search users...",value:j,onChange:e=>E(e.target.value),className:"block w-full pl-10 pr-3 py-2.5 border rounded-lg text-sm shadow-sm ".concat(a?"bg-gray-800 border-gray-600 text-white placeholder-gray-400 focus:border-orange-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-orange-500"," focus:outline-none focus:ring-2 focus:ring-orange-500/20 transition-colors")})]})]})]}),(0,n.jsxs)("div",{className:"".concat(a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"," rounded-lg border overflow-hidden"),children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,n.jsx)("thead",{className:a?"bg-gray-700":"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"SR."}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"NAME"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"STATUS"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"PLAN"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"MINUTES"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"ASSISTANT"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium ".concat(a?"text-gray-300":"text-gray-500"," uppercase tracking-wider"),children:"ACTIONS"})]})}),(0,n.jsx)("tbody",{className:"divide-y ".concat(a?"divide-gray-700":"divide-gray-200"),children:Z.map(e=>{var t;let s=(e=>{switch(e.toLowerCase()){case"active":return{bg:"#DCFCE7",text:"#166534",border:"#BBF7D0"};case"inactive":return{bg:"#FEF3C7",text:"#92400E",border:"#FDE68A"};default:return{bg:"#F3F4F6",text:"#374151",border:"#D1D5DB"}}})(e.status),r=(e=>{switch((e||"").toLowerCase()){case"basic":case"":case"starter":return{bg:"#DBEAFE",text:"#1D4ED8",border:"#93C5FD"};case"premium":case"popular":return{bg:"#D1FAE5",text:"#065F46",border:"#A7F3D0"};case"enterprise":case"pro":return{bg:"#E9D5FF",text:"#7C3AED",border:"#C4B5FD"};case"free":return{bg:"#F3F4F6",text:"#6B7280",border:"#D1D5DB"};default:return{bg:"#F3F4F6",text:"#374151",border:"#D1D5DB"}}})(e.plan);return(0,n.jsxs)("tr",{className:"".concat(a?"hover:bg-gray-700":"hover:bg-gray-50"," transition-colors"),children:[(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium ".concat(a?"text-gray-300":"text-gray-900"),children:["#",e.id]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,n.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:"".concat(y.T.zB,"20")},children:(0,n.jsx)(d.A,{className:"h-5 w-5",style:{color:y.T.zB}})})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsx)("div",{className:"text-sm font-medium ".concat(a?"text-white":"text-gray-900"),children:e.name}),(0,n.jsx)("div",{className:"text-sm ".concat(a?"text-gray-400":"text-gray-500"),children:e.email})]})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full border",style:{backgroundColor:s.bg,color:s.text,borderColor:s.border},children:e.status})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full border",style:{backgroundColor:r.bg,color:r.text,borderColor:r.border},children:(t=e.plan)&&""!==t.trim()?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Free"})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm ".concat(a?"text-gray-300":"text-gray-900"),children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("span",{className:"font-medium",children:[e.minutes_used,"/",e.minutes_allowed]}),(0,n.jsx)("div",{className:"w-16 h-1 rounded-full mt-1 ".concat(a?"bg-gray-700":"bg-gray-200"),children:(0,n.jsx)("div",{className:"h-1 rounded-full bg-orange-500",style:{width:"".concat(Math.min(e.minutes_used/e.minutes_allowed*100,100),"%")}})})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(()=>{let t=(e=>{switch(e){case"synced":return{color:"#10B981",bgColor:"#ECFDF5",text:"Synced",icon:"✅",description:"Assistant is in sync with VAPI"};case"out_of_sync":return{color:"#F59E0B",bgColor:"#FFFBEB",text:"Out of Sync",icon:"⚠️",description:"Assistant data differs from VAPI"};case"error":return{color:"#EF4444",bgColor:"#FEF2F2",text:"Error",icon:"❌",description:"Failed to connect to VAPI"};default:return{color:"#6B7280",bgColor:"#F9FAFB",text:"No Assistant",icon:"➖",description:"No assistant configured"}}})(e.assistant_status);return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("div",{className:"flex items-center px-2 py-1 text-xs font-medium rounded-full border",style:{backgroundColor:t.bgColor,color:t.color,borderColor:t.color+"40"},title:t.description,children:[(0,n.jsx)("span",{className:"mr-1",children:t.icon}),t.text]}),e.agent_id&&(0,n.jsxs)("div",{className:"text-xs ".concat(a?"text-gray-500":"text-gray-400"),children:[(0,n.jsx)(u,{className:"h-3 w-3 inline mr-1"}),e.last_synced?new Date(e.last_synced).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Never"]})]})})()}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[e.agent_id?(0,n.jsx)("button",{onClick:()=>Q(e.id),className:"p-1.5 rounded-md transition-colors ".concat(a?"text-gray-400 hover:text-white hover:bg-gray-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),title:"VAPI Configuration",children:(0,n.jsx)(m.A,{className:"h-4 w-4"})}):(0,n.jsx)("div",{className:"p-1.5 w-7 h-7",children:" "}),(0,n.jsx)("button",{onClick:()=>(e=>{let t=I.find(t=>t.id===e);t&&(L({status:t.status,addMinutes:"1",planSubscription:t.plan||"basic"}),M({isOpen:!0,user:t}))})(e.id),className:"p-1.5 rounded-md transition-colors ".concat(a?"text-gray-400 hover:text-white hover:bg-gray-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),title:"Edit User",children:(0,n.jsx)(g.A,{className:"h-4 w-4"})}),(0,n.jsx)("button",{onClick:()=>(e=>{let t=I.find(t=>t.id===e);t&&O({isOpen:!0,user:t})})(e.id),className:"p-1.5 rounded-md transition-colors ".concat(a?"text-gray-400 hover:text-red-400 hover:bg-gray-600":"text-gray-500 hover:text-red-600 hover:bg-gray-100"),title:"Delete User",children:(0,n.jsx)(p,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),0===Z.length&&(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(c.A,{className:"mx-auto h-12 w-12 ".concat(a?"text-gray-600":"text-gray-400")}),(0,n.jsx)("h3",{className:"mt-2 text-sm font-medium ".concat(a?"text-gray-300":"text-gray-900"),children:"No users found"}),(0,n.jsx)("p",{className:"mt-1 text-sm ".concat(a?"text-gray-400":"text-gray-500"),children:"Try adjusting your search terms."})]})]}),(0,n.jsx)(x.A,{isOpen:D.isOpen,onClose:$,title:"Manage User",customContent:D.user?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4 pb-3 border-b border-gray-200 dark:border-gray-700",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white font-semibold text-sm",style:{backgroundColor:y.T.zB},children:"LOGO"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-base ".concat(a?"text-white":"text-gray-900"),children:D.user.name}),(0,n.jsx)("p",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-600"),children:D.user.id})]}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsxs)("p",{className:"text-xs font-medium ".concat(a?"text-gray-300":"text-gray-700"),children:[D.user.minutes_used,"/",D.user.minutes_allowed," minutes"]})})]}),(0,n.jsx)("div",{className:"h-1.5 rounded-full mt-1 ".concat(a?"bg-gray-700":"bg-gray-200"),children:(0,n.jsx)("div",{className:"h-1.5 rounded-full",style:{backgroundColor:y.T.zB,width:"".concat(Math.min(D.user.minutes_used/D.user.minutes_allowed*100,100),"%")}})})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1.5 ".concat(a?"text-gray-300":"text-gray-700"),children:"User Status"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:F.status,onChange:e=>ee("status",e.target.value),disabled:B,className:"custom-select w-full px-3 py-2 border rounded-lg text-sm appearance-none cursor-pointer ".concat(B?"opacity-50 cursor-not-allowed":""," ").concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"," focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"),children:[(0,n.jsx)("option",{value:"Active",children:"Active"}),(0,n.jsx)("option",{value:"Inactive",children:"Inactive"})]}),(0,n.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,n.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1.5 ".concat(a?"text-gray-300":"text-gray-700"),children:"Add Minutes"}),(0,n.jsx)("input",{type:"number",value:F.addMinutes,onChange:e=>ee("addMinutes",e.target.value),disabled:B,className:"w-full px-3 py-2 border rounded-lg text-sm ".concat(B?"opacity-50 cursor-not-allowed":""," ").concat(a?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"," focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"),placeholder:"Enter minutes to add",min:"1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1.5 ".concat(a?"text-gray-300":"text-gray-700"),children:"Plan Subscription"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:F.planSubscription,onChange:e=>ee("planSubscription",e.target.value),disabled:B,className:"custom-select w-full px-3 py-2 border rounded-lg text-sm appearance-none cursor-pointer ".concat(B?"opacity-50 cursor-not-allowed":""," ").concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"," focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"),children:[(0,n.jsx)("option",{value:"basic",children:"Basic"}),(0,n.jsx)("option",{value:"premium",children:"Premium"}),(0,n.jsx)("option",{value:"enterprise",children:"Enterprise"})]}),(0,n.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,n.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1.5 ".concat(a?"text-gray-300":"text-gray-700"),children:"Restaurant Location"}),(0,n.jsx)("p",{className:"text-sm ".concat(a?"text-gray-400":"text-gray-600"," leading-relaxed"),children:(null==(e=D.user)?void 0:e.location)||"No location specified"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1.5 ".concat(a?"text-gray-300":"text-gray-700"),children:"Restaurant Description"}),(0,n.jsx)("p",{className:"text-sm leading-relaxed ".concat(a?"text-gray-400":"text-gray-600"),children:(null==(t=D.user)?void 0:t.description)||"No description provided"})]})]})]})]}):null,primaryButton:{text:B?(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):"Save Changes",onClick:X,disabled:B},secondaryButton:{text:"Cancel",onClick:$}}),(0,n.jsx)(x.A,{isOpen:P.isOpen,onClose:K,icon:(0,n.jsx)(h.A,{className:"h-8 w-8"}),title:"Delete User",description:P.user?'Are you sure you want to delete "'.concat(P.user.name,'"? This action cannot be undone and will permanently remove all data associated with this user account.'):"",primaryButton:{text:"Delete User",onClick:()=>{P.user&&(i.vF.logUserAction("USER_DELETED",P.user.email,"Admin deleted user: ".concat(P.user.name," (ID: ").concat(P.user.id,")")),A("User ".concat(P.user.name," has been deleted successfully")),O({isOpen:!1,user:null}))}},secondaryButton:{text:"Cancel",onClick:K}}),(0,n.jsx)(x.A,{isOpen:U.isOpen,onClose:en,title:"VAPI Configuration",customContent:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-end space-x-2",children:H.isEditing?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{H.selectedUser&&et("selectedUser",H.selectedUser),W(e=>({...e,isEditing:!1}))},className:"px-3 py-2 text-sm font-medium rounded-md border transition-colors",style:{color:a?y.T.Oh.Sh:y.T.Oh.eD,borderColor:a?y.T.Oh.l8:y.T.Oh.Sh},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=a?y.T.Oh.eD:y.T.Oh[50]},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Cancel"}),(0,n.jsx)("button",{onClick:ea,className:"px-3 py-2 text-sm font-medium text-white rounded-md transition-colors",style:{backgroundColor:y.T.zB},children:"Save Changes"})]}):(0,n.jsxs)("button",{onClick:()=>{console.log("\uD83D\uDD27 Starting VAPI edit mode"),W(e=>({...e,isEditing:!0}))},disabled:!H.selectedUser,className:"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md border transition-colors ".concat(H.selectedUser?"":"opacity-50 cursor-not-allowed"),style:{color:a?y.T.Oh.Sh:y.T.Oh.eD,borderColor:a?y.T.Oh.l8:y.T.Oh.Sh},onMouseEnter:e=>{H.selectedUser&&(e.currentTarget.style.backgroundColor=a?y.T.Oh.eD:y.T.Oh[50])},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,n.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Edit"]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("label",{className:"text-sm font-medium",style:{color:a?y.T.Oh.Sh:y.T.Oh.eD},children:"Select User"})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("select",{value:H.selectedUser,onChange:e=>et("selectedUser",e.target.value),className:"custom-select w-full px-3 py-2 border rounded-lg text-sm appearance-none cursor-pointer ".concat(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"," focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500"),children:[(0,n.jsx)("option",{value:"",children:"-- Select a user --"}),I.filter(e=>e.agent_id).map(e=>(0,n.jsxs)("option",{value:e.id.toString(),children:[e.name," (#",e.id,")"]},e.id))]}),(0,n.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,n.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),!H.selectedUser&&(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(f.A,{className:"mx-auto h-12 w-12 ".concat(a?"text-gray-600":"text-gray-400"),style:{color:a?y.T.Oh.l8:y.T.Oh.jC}}),(0,n.jsx)("h3",{className:"mt-2 text-sm font-medium",style:{color:a?y.T.Oh.Sh:y.T.Oh.uu},children:"Select a user to manage their VAPI configurations"}),(0,n.jsx)("p",{className:"mt-1 text-sm",style:{color:a?y.T.Oh.jC:y.T.Oh.C2},children:"Choose a user from the dropdown above to configure their assistant settings."})]}),H.selectedUser&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"," rounded-lg border p-4 mb-4"),children:[(0,n.jsx)("h4",{className:"text-sm font-semibold mb-3 ".concat(a?"text-white":"text-gray-900"),children:"User Information"}),(()=>{let e=I.find(e=>e.id.toString()===H.selectedUser);return e?(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs font-medium uppercase tracking-wide ".concat(a?"text-gray-400":"text-gray-500"),children:"Restaurant Name"}),(0,n.jsx)("p",{className:"text-sm font-medium ".concat(a?"text-white":"text-gray-900"),children:e.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs font-medium uppercase tracking-wide ".concat(a?"text-gray-400":"text-gray-500"),children:"Email"}),(0,n.jsx)("p",{className:"text-sm ".concat(a?"text-gray-300":"text-gray-600"),children:e.email})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs font-medium uppercase tracking-wide ".concat(a?"text-gray-400":"text-gray-500"),children:"Agent ID"}),(0,n.jsx)("p",{className:"text-sm ".concat(a?"text-gray-300":"text-gray-600"),children:e.agent_id?(0,n.jsx)("span",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-600 px-2 py-1 rounded",children:e.agent_id}):(0,n.jsx)("span",{className:"text-gray-400 italic",children:"No agent assigned"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs font-medium uppercase tracking-wide ".concat(a?"text-gray-400":"text-gray-500"),children:"Status"}),(0,n.jsx)("p",{className:"text-sm",children:(0,n.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"),children:e.status})})]})]}):null})()]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("label",{className:"text-sm font-medium",style:{color:a?y.T.Oh.Sh:y.T.Oh.eD},children:"Starting Message"})}),H.isEditing?(0,n.jsx)("input",{type:"text",value:H.startingMessage,onChange:e=>et("startingMessage",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/20",style:{backgroundColor:a?y.T.Oh.eD:y.T.ON,borderColor:a?y.T.Oh.l8:y.T.Oh.Sh,color:a?y.T.ON:y.T.Oh.uu},onFocus:e=>{e.currentTarget.style.borderColor=y.T.zB},onBlur:e=>{e.currentTarget.style.borderColor=a?y.T.Oh.l8:y.T.Oh.Sh},placeholder:"Enter starting message"}):(0,n.jsx)("p",{className:"text-sm rounded-md p-3",style:{color:a?y.T.Oh.Sh:y.T.Oh.eD,backgroundColor:a?y.T.Oh.eD:y.T.Oh.Id},children:H.startingMessage})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("label",{className:"text-sm font-medium",style:{color:a?y.T.Oh.Sh:y.T.Oh.eD},children:"System Prompt"})}),H.isEditing?(0,n.jsx)("textarea",{rows:8,value:H.systemPrompt,onChange:e=>et("systemPrompt",e.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-orange-500/20",style:{backgroundColor:a?y.T.Oh.eD:y.T.ON,borderColor:a?y.T.Oh.l8:y.T.Oh.Sh,color:a?y.T.ON:y.T.Oh.uu},onFocus:e=>{e.currentTarget.style.borderColor=y.T.zB},onBlur:e=>{e.currentTarget.style.borderColor=a?y.T.Oh.l8:y.T.Oh.Sh},placeholder:"Enter system prompt"}):(0,n.jsx)("div",{className:"text-sm rounded-md p-3 whitespace-pre-wrap max-h-48 overflow-y-auto",style:{color:a?y.T.Oh.Sh:y.T.Oh.eD,backgroundColor:a?y.T.Oh.eD:y.T.Oh.Id},children:H.systemPrompt})]})]})]})]}),secondaryButton:{text:"Close",onClick:en}})]})})]})}},88125:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},89731:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(12115);let s=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})}}]);